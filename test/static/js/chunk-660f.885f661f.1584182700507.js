(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-660f"],{"0M2G":function(t,e,o){"use strict";var r=o("DWKj");o.n(r).a},"73Xj":function(t,e,o){"use strict";o.d(e,"a",function(){return s}),o.d(e,"b",function(){return a});var r=o("t3Un");function s(t,e){var o=new URLSearchParams;return o.append("regionid",e),o.append("repositoryid",t),Object(r.a)({url:"/repository/getrepositorybyregionid",method:"post",data:o})}function a(t){return Object(r.a)({url:"/role/getrolelist",method:"post",params:t})}},DWKj:function(t,e,o){},DYl1:function(t,e,o){"use strict";o.r(e);o("GLI9");var r=o("moiu"),s=o("VG0r"),a=o("73Xj"),n={name:"AddDiscountsetting",data:function(){return{notcar:!1,types:[],roles:[],personalForm:{createId:this.$store.getters.userId,category:"1"},productForm:{},personalrules:{roleId:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){},mounted:function(){this.getinformation()},beforeCreate:function(){this},methods:{iscar:function(t){this.notcar="1"!==t},getinformation:function(){var t=this;Object(a.b)().then(function(e){200===e.data.ret?t.roles=e.data.data.content:console.log("角色列表出错")}),Object(s.v)(2).then(function(e){200===e.data.ret&&(t.types=e.data.data.content.list)})},restAllForm:function(){this.personalForm={createId:this.$store.getters.userId,category:"1"}},handlesave:function(){var t=this;if("1"===this.personalForm.category&&(""===this.personalForm.typeId||null===this.personalForm.typeId||void 0===this.personalForm.typeId))return this.$notify.error({title:"wrong",message:"请选择车型",offset:100}),!1;if("1"===this.personalForm.category&&(""===this.personalForm.discountMoney||null===this.personalForm.discountMoney||void 0===this.personalForm.discountMoney))return this.$notify.error({title:"wrong",message:"请输入最大折扣额",offset:100}),!1;if("2"===this.personalForm.category&&(""===this.personalForm.discountRate||null===this.personalForm.discountRate||void 0===this.personalForm.discountRate))return this.$notify.error({title:"wrong",message:"请输入最大折扣率",offset:100}),!1;var e=this.personalForm;for(var o in e)""!==e[o]&&void 0!==e[o]&&null!==e[o]||delete e[o];this.$refs.personalForm.validate(function(o){if(!o)return t.$notify.error({title:"wrong",message:"Information is incomplete",offset:100}),!1;Object(r.a)(e).then(function(e){console.log(e),200===e.data.ret?(t.$notify({title:"successful",message:"save successful",type:"success",offset:100}),t.restAllForm(),t.$refs.personalForm.clearValidate(),t.$refs.personalForm.resetFields()):t.$notify.error({title:"wrong",message:e.data.msg,offset:100})})})},handlecancel:function(){this.$router.go(-1);this.$store.dispatch("delView",{path:"/CustomerMarketing/AddCustomerMarketing",name:"AddCustomerMarketing",fullPath:"/CustomerMarketing/AddCustomerMarketing",title:"AddCustomerMarketing"}).then(function(t){t.visitedViews})}}},i=(o("0M2G"),o("KHd+")),l=Object(i.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ERP-container"},[o("div",{staticClass:"app-container",staticStyle:{"padding-right":"0"}},[o("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[o("h2",{ref:"geren",staticClass:"form-name"},[t._v(t._s(t.$t("Hmodule.basicinfo")))]),t._v(" "),o("div",{staticClass:"container",staticStyle:{"margin-top":"37px"}},[o("el-form",{ref:"personalForm",staticClass:"demo-ruleForm",attrs:{model:t.personalForm,rules:t.personalrules,inline:!0,"status-icon":"","label-width":"130px"}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{label:t.$t("updates.roleid"),prop:"roleId"}},[o("el-select",{staticStyle:{"margin-left":"18px",width:"200px"},on:{focus:t.getinformation},model:{value:t.personalForm.roleId,callback:function(e){t.$set(t.personalForm,"roleId",e)},expression:"personalForm.roleId"}},t._l(t.roles,function(t,e){return o("el-option",{key:e,attrs:{label:t.roleName,value:t.id}})}))],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{label:t.$t("inventoryAlarm.categoryName")}},[o("el-select",{staticStyle:{"margin-left":"18px",width:"200px"},on:{change:t.iscar},model:{value:t.personalForm.category,callback:function(e){t.$set(t.personalForm,"category",e)},expression:"personalForm.category"}},[o("el-option",{attrs:{value:"1",label:"整车"}}),t._v(" "),o("el-option",{attrs:{value:"2",label:"配件"}})],1)],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{label:t.$t("searchSaleOrderDetailReport.productTypeName")}},[o("el-select",{staticStyle:{"margin-left":"18px",width:"200px"},attrs:{disabled:t.notcar},on:{focus:t.getinformation},model:{value:t.personalForm.typeId,callback:function(e){t.$set(t.personalForm,"typeId",e)},expression:"personalForm.typeId"}},t._l(t.types,function(t,e){return o("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})}))],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{label:t.$t("tongyo.zdzke")}},[o("el-input",{staticStyle:{"margin-left":"18px",width:"200px"},attrs:{disabled:t.notcar,clearable:""},model:{value:t.personalForm.discountMoney,callback:function(e){t.$set(t.personalForm,"discountMoney",e)},expression:"personalForm.discountMoney"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{label:t.$t("tongyo.zdzkl")}},[o("el-input-number",{staticStyle:{"margin-left":"18px",width:"200px"},attrs:{controls:!1,disabled:!1===t.notcar,min:0,max:1,clearable:""},model:{value:t.personalForm.discountRate,callback:function(e){t.$set(t.personalForm,"discountRate",e)},expression:"personalForm.discountRate"}})],1)],1)],1)],1)],1)]),t._v(" "),o("div",{staticClass:"buttons",staticStyle:{"margin-top":"20px"}},[o("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],staticStyle:{background:"#3696fd","border-color":"#3696fd",width:"98px"},attrs:{type:"primary"},on:{click:function(e){t.handlesave()}}},[t._v(t._s(t.$t("Hmodule.baoc")))]),t._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.handlecancel()}}},[t._v(t._s(t.$t("Hmodule.cancel")))])],1)],1)])},[],!1,null,"5f41037e",null);l.options.__file="AddDiscountsetting.vue";e.default=l.exports},GLI9:function(t,e,o){"use strict";o("Kw5r").default.directive("noMoreClick",{inserted:function(t,e){t.addEventListener("click",function(e){t.classList.add("is-disabled"),t.disabled=!0,setTimeout(function(){t.disabled=!1,t.classList.remove("is-disabled")},3e3)})}})}}]);