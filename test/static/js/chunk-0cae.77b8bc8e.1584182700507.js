(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0cae"],{"8AYL":function(t,e,s){"use strict";var i=s("Pass");s.n(i).a},E0Oq:function(t,e,s){"use strict";var i=s("oF2d");s.n(i).a},Pass:function(t,e,s){},RjAt:function(t,e,s){},"beS/":function(t,e,s){"use strict";s.r(e);var i=s("QbLZ"),n=s.n(i),o=s("L2JU"),a={filters:{time:function(t){return"string"==typeof t&&(t=new Date(t)),t.getMinutes()<10?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()}},computed:n()({},Object(o.b)(["selectedChat"]),{chatlist:function(){return this.$store.getters.chatlist},user:function(){return this.$store.getters.user},messages:function(){return this.$store.getters.messages},emojis:function(){return this.$store.getters.emojis}}),watch:{messages:function(t){var e=this;console.log(t),setTimeout(function(){return e.$refs.list.scrollTop=e.$refs.list.scrollHeight},0)}},created:function(){var t=this;setTimeout(function(){return t.$refs.list.scrollTop=t.$refs.list.scrollHeight},0)},beforeCreate:function(){this},methods:{replaceFace:function(t){if(t.includes("/:")){for(var e=this.emojis,s=0;s<e.length;s++)t=t.replace(e[s].reg,'<img src="static/emoji/'+e[s].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return t}return t}}},c=(s("8AYL"),s("KHd+")),r=Object(c.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("header",{staticClass:"header"},[s("div",{staticClass:"friendname"},[t._v(t._s(t.selectedChat.user.name))])]),t._v(" "),s("div",{ref:"list",staticClass:"message-wrapper"},[t.selectedChat?s("ul",{staticClass:"navList"},t._l(t.selectedChat.messages,function(e,i){return s("li",{key:i,staticClass:"message-item"},[s("div",{staticClass:"time"},[s("span",[t._v(t._s(t._f("time")(e.date)))])]),t._v(" "),s("div",{staticClass:"main",class:{self:e.self}},[s("img",{staticClass:"avatar",attrs:{src:e.self?t.user.img:t.selectedChat.user.img,width:"36",height:"36"}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"http"!==e.content.substr(0,4),expression:"item.content.substr(0,4) !== 'http'"}],staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"http"===e.content.substr(0,4),expression:"item.content.substr(0,4) === 'http'"}],staticClass:"text"},[s("img",{attrs:{src:e.content}})])])])])})):t._e()])])},[],!1,null,"565d0fbf",null);r.options.__file="message.vue";var l=r.exports,u={data:function(){return{content:"",reply:"未找到",frequency:0,warn:!1,showEmoji:!1}},computed:n()({},Object(o.b)(["selectedChat"]),{emojis:function(){return this.$store.getters.emojis}}),watch:{selectId:function(){var t=this;setTimeout(function(){t.$refs.text.focus()},0)},content:function(){var t=this;""===this.content&&0===this.frequency&&(this.warn=!0,this.frequency++,setTimeout(function(){t.warn=!1},1e3))}},mounted:function(){this.$refs.text.focus()},beforeCreate:function(){this},methods:{IsshowEmoji:function(){console.log("showEmoji",this.showEmoji),this.showEmoji=!this.showEmoji},onKeyup:function(t){13===t.keyCode&&this.send()},send:function(){var t=this;if("↵"===this.content)return!1;if(this.showEmoji=!1,console.log("this.content",this.content),this.content.length<=0)this.warn=!0,this.content="",setTimeout(function(){t.warn=!1},1e3);else{var e={content:this.content};this.$store.dispatch("sendMessage",e),this.$store.dispatch("chatsenddata",this.content),this.content=""}}}},h=(s("E0Oq"),Object(c.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text"},[s("div",{staticClass:"emoji"},[s("div",{staticClass:"showemoji",on:{click:t.IsshowEmoji}},[s("svg-icon",{staticStyle:{width:"40px"},attrs:{"icon-class":"smail"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmoji,expression:"showEmoji"}],staticClass:"emojiBox"},t._l(t.emojis,function(e,i){return s("li",{key:i},[s("img",{attrs:{src:"static/emoji/"+e.file,data:e.code},on:{click:function(s){t.content+=e.code}}})])}))]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"text",domProps:{value:t.content},on:{keyup:t.onKeyup,click:function(e){t.showEmoji=!1},input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),s("div",{staticClass:"send",on:{click:t.send}},[s("span",[t._v("发送(ent)")])]),t._v(" "),s("transition",{attrs:{name:"appear"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.warn,expression:"warn"}],staticClass:"warn"},[s("div",{staticClass:"description"},[t._v("不能发送空白信息")])])])],1)},[],!1,null,"13228cd6",null));h.options.__file="text.vue";var m={name:"Index",components:{message:l,vText:h.exports}},f=(s("feYx"),Object(c.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"chatbox"},[e("message"),this._v(" "),e("v-text")],1)])},[],!1,null,"b42f85ba",null));f.options.__file="index.vue";e.default=f.exports},feYx:function(t,e,s){"use strict";var i=s("RjAt");s.n(i).a},oF2d:function(t,e,s){}}]);