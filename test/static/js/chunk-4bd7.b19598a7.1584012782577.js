(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4bd7"],{"9mSC":function(e,t,i){},GLI9:function(e,t,i){"use strict";i("Kw5r").default.directive("noMoreClick",{inserted:function(e,t){e.addEventListener("click",function(t){e.classList.add("is-disabled"),e.disabled=!0,setTimeout(function(){e.disabled=!1,e.classList.remove("is-disabled")},3e3)})}})},NBqH:function(e,t,i){"use strict";i.d(t,"c",function(){return o}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return n}),i.d(t,"b",function(){return s});var a=i("t3Un");function o(e){var t=new URLSearchParams;return""!==e.categoryname&&null!==e.categoryname&&void 0!==e.categoryname&&t.append("categoryname",e.categoryname),""!==e.iseffective&&null!==e.iseffective&&void 0!==e.iseffective&&t.append("iseffective",e.iseffective),""!==e.type&&null!==e.type&&void 0!==e.type&&t.append("type",e.type),t.append("pagenum",e.pagenum),t.append("pagesize",e.pagesize),Object(a.a)({url:"/stockcategory/searchStockCategory",method:"post",data:t})}function r(e){var t=new URLSearchParams;return""!==e.categoryname&&null!==e.categoryname&&t.append("categoryname",e.categoryname),""!==e.category&&null!==e.category&&t.append("category",e.category),""!==e.iseffective&&null!==e.iseffective&&t.append("iseffective",e.iseffective),""!==e.type&&null!==e.type&&t.append("type",e.type),Object(a.a)({url:"/stockcategory/addStockCategory",method:"post",data:t})}function n(e){var t=new URLSearchParams;return""!==e.categoryName&&null!==e.categoryName&&t.append("categoryname",e.categoryName),""!==e.isEffective&&null!==e.isEffective&&t.append("iseffective",e.isEffective),""!==e.id&&null!==e.id&&t.append("id",e.id),Object(a.a)({url:"/stockcategory/updateStockCategory",method:"post",data:t})}function s(e,t){var i=new URLSearchParams;return""!==e&&null!==e&&i.append("ids",e),""!==t&&null!==t&&void 0!==t&&i.append("operatorId",t),Object(a.a)({url:"/stockcategory/delateStockCategory",method:"post",data:i})}},md8i:function(e,t,i){"use strict";i.r(t);var a=i("P2sY"),o=i.n(a),r=(i("GLI9"),i("NBqH")),n=i("t3Un");function s(e){var t=new URLSearchParams;return""===e.id&&void 0===e.id&&null===e.id||t.append("id",e.id),""===e.repositoryId&&void 0===e.repositoryId&&null===e.repositoryId||t.append("repositoryId",e.repositoryId),""===e.iseffective&&void 0===e.iseffective&&null===e.iseffective||t.append("iseffective",e.iseffective),t.append("pageNum",e.pageNum),t.append("pageSize",e.pageSize),Object(n.a)({url:"/smartreplenishment/searchRules",method:"post",data:t})}var l=i("ZySA"),c=i("Mz3J"),d=i("Q4Eu"),p=i("+Khs"),m=i("41Be"),u=i("qWHW"),y={name:"InventoryReplenishment",directives:{waves:l.a,permission:d.a,permission2:p.a},components:{Pagination:c.a,MyRepository:u.a},filters:{typeFilter:function(e){return{1:"采购类别"}[e]},iseffectiveFilter:function(e){return{1:"启用",2:"停用"}[e]}},data:function(){var e=this;return{repositorycontrol:!1,repositoryId:"",moreaction:[],categoryVisible:!1,addCategoryForm:{repositoryId:"",circle:"",nomalDay:"",emergencyDay:"",iseffective:"1"},addCategoryFormRules:{repositoryId:[{required:!0,validator:function(t,i,a){void 0===e.repositoryId||null===e.repositoryId||""===e.repositoryId?a(new Error("请选择仓库")):a()},trigger:"change"}],circle:[{required:!0,message:"请输入补货周期",trigger:"change"}],nomalDay:[{required:!0,message:"请输入正常时间",trigger:"change"}],emergencyDay:[{required:!0,message:"请输入紧急时间",trigger:"change"}],iseffective:[{required:!0,message:"请选择",trigger:"change"}]},editcategoryVisible:!1,editCategoryForm:{repositoryId:"",circle:"",nomalDay:"",emergencyDay:"",isEffective:""},editCategoryFormRules:{circle:[{required:!0,message:"请输入",trigger:"blur"}],nomalDay:[{required:!0,message:"请输入",trigger:"change"}],emergencyDay:[{required:!0,message:"请输入",trigger:"change"}],isEffective:[{required:!0,message:"请选择",trigger:"change"}]},downloadLoading:!1,list:[],total:0,tableKey:0,listLoading:!0,getemplist:{id:"",repositoryId:"",iseffective:"",pageNum:1,pageSize:10}}},mounted:function(){this.getlist()},beforeCreate:function(){this},methods:{checkPermission:m.a,handlechooseRep:function(){this.repositorycontrol=!0},repositoryname:function(e){console.log("val",e),this.repositoryId=e.repositoryName,this.addCategoryForm.repositoryId=e.id},getlist:function(){var e=this;this.listLoading=!0,s(this.getemplist).then(function(t){200===t.data.ret?(e.list=t.data.data.content.list,e.total=t.data.data.content.totalCount):console.log("列表出错"),setTimeout(function(){e.listLoading=!1},50)})},handleFilter:function(){var e=this;this.getemplist.pagenum=1,s(this.getemplist).then(function(t){200===t.data.ret?(e.list=t.data.data.content.list,e.total=t.data.data.content.totalCount):console.log("搜索出错")})},handleSelectionChange:function(e){this.moreaction=e},handleCommand:function(e){var t=this,i=this.moreaction.map(function(e){return e.id}).join();"delete"===e&&this.$confirm(this.$t("prompt.scts"),this.$t("prompt.ts"),{confirmButtonText:this.$t("prompt.qd"),cancelButtonText:this.$t("prompt.qx"),type:"warning"}).then(function(){Object(r.b)(i,t.$store.getters.userId).then(function(e){200===e.data.ret||100===e.data.ret?(t.$notify({title:t.$t("prompt.sccg"),type:"success",offset:100}),t.getlist()):t.$notify.error({title:"wrong",message:"wrong",offset:100})})}).catch(function(){t.$message({type:"info",message:t.$t("prompt.yqxsc")})})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?",this.$t("prompt.ts"),{confirmButtonText:this.$t("prompt.qd"),cancelButtonText:this.$t("prompt.qx"),type:"warning"}).then(function(){Object(r.b)(e.id,t.$store.getters.userId).then(function(e){200===e.data.ret||100===e.data.ret?(t.$notify({title:t.$t("prompt.sccg"),type:"success",offset:100}),t.getlist()):t.$notify.error({title:"wrong",message:"wrong",offset:100})})}).catch(function(){t.$message({type:"info",message:t.$t("prompt.yqxsc")})})},handleEdit:function(e){this.editcategoryVisible=!0,this.editCategoryForm=o()({},e),this.repositoryId=e.repositoryName,this.editCategoryForm.isEffective=String(e.isEffective),console.log("add",this.editCategoryForm)},handleNo:function(){this.editcategoryVisible=!1},handleOk:function(){var e=this;this.$refs.editCategoryForm.validate(function(t){if(!t)return e.$notify.error({title:"wrong",message:"Information is incomplete",offset:100}),!1;(function(e){var t=new URLSearchParams;return""===e.circle&&void 0===e.circle&&null===e.circle||t.append("circle",e.circle),""===e.nomalDay&&void 0===e.nomalDay&&null===e.nomalDay||t.append("nomalDay",e.nomalDay),""===e.emergencyDay&&void 0===e.emergencyDay&&null===e.emergencyDay||t.append("emergencyDay",e.emergencyDay),""===e.id&&void 0===e.id&&null===e.id||t.append("id",e.id),""===e.isEffective&&void 0===e.isEffective&&null===e.isEffective||t.append("iseffective",e.isEffective),Object(n.a)({url:"/smartreplenishment/updateRules",method:"post",data:t})})(e.editCategoryForm).then(function(t){200===t.data.ret?(e.$notify({title:"successful",message:"修改成功",type:"success",offset:100}),e.getlist(),e.$refs.editCategoryForm.clearValidate(),e.repositoryId="",e.editcategoryVisible=!1):console.log("列表出错")})})},handleAdd:function(){this.repositoryId="",this.categoryVisible=!0},handlecancel:function(){this.categoryVisible=!1},restAddCategoryForm:function(){this.addCategoryForm={categoryname:"",type:"",iseffective:"1"}},handlesave:function(){var e=this;console.log(this.addCategoryForm),this.$refs.addCategoryForm.validate(function(t){if(!t)return e.$notify.error({title:"wrong",message:"Information is incomplete",offset:100}),!1;(function(e){var t=new URLSearchParams;return""===e.circle&&void 0===e.circle&&null===e.circle||t.append("circle",e.circle),""===e.nomalDay&&void 0===e.nomalDay&&null===e.nomalDay||t.append("nomalDay",e.nomalDay),""===e.emergencyDay&&void 0===e.emergencyDay&&null===e.emergencyDay||t.append("emergencyDay",e.emergencyDay),""===e.repositoryId&&void 0===e.repositoryId&&null===e.repositoryId||t.append("repositoryId",e.repositoryId),""===e.iseffective&&void 0===e.iseffective&&null===e.iseffective||t.append("isEffective",e.iseffective),Object(n.a)({url:"/smartreplenishment/addRules",method:"post",data:t})})(e.addCategoryForm).then(function(t){200===t.data.ret?(e.$notify({title:"successful",message:"新建成功",type:"success",offset:100}),e.getlist(),e.$refs.addCategoryForm.clearValidate(),e.$refs.addCategoryForm.resetFields(),e.repositoryId="",e.restAddCategoryForm(),e.categoryVisible=!1):e.$notify.error({title:"wrong",message:"wrong",offset:100})})})},handleContract:function(){console.log(123)},handleExport:function(){var e=this;this.downloadLoading=!0,Promise.all([i.e("chunk-ef4a"),i.e("chunk-7c4b")]).then(i.bind(null,"S/jZ")).then(function(t){var i=e.formatJson(["id","jobNumber","account","firstName","gender","birthday","email","postName","deptName","regionName","repositoryName","createTime","dimissionTime","stat"],e.list);t.export_json_to_excel({header:["编号","工号","员工登陆账号","姓名","性别","生日","邮箱","职位","所属部门","所属区域","所属门店","入职时间","离职时间","状态"],data:i,filename:"员工资料表"}),e.downloadLoading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},handlePrint:function(){console.log(456)},test:function(){console.log("this.ed",this.editCategoryForm)}}},f=(i("oPJa"),i("KHd+")),g=Object(f.a)(y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ERP-container"},[i("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:e.$t("updates.ckbh"),clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.getemplist.repositoryId,callback:function(t){e.$set(e.getemplist,"repositoryId",t)},expression:"getemplist.repositoryId"}}),e._v(" "),i("el-select",{staticClass:"filter-item",attrs:{placeholder:e.$t("updates.qyzt"),value:e.getemplist.iseffective,clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.getemplist.iseffective,callback:function(t){e.$set(e.getemplist,"iseffective",t)},expression:"getemplist.iseffective"}},[i("el-option",{attrs:{label:"on duty",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"closed",value:"2"}})],1),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{width:"86px","margin-top":"10px"},attrs:{type:"primary",icon:"el-icon-search",round:""},on:{click:e.handleFilter}},[e._v(e._s(e.$t("public.search")))])],1),e._v(" "),i("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[i("el-dropdown",{on:{command:e.handleCommand}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0"},attrs:{type:"primary"}},[e._v("\n        "+e._s(e.$t("public.batchoperation"))+" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{staticStyle:{width:"140px"},attrs:{slot:"dropdown"},slot:"dropdown"})],1),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["104-125-6"],expression:"['104-125-6']"},{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{width:"86px"},attrs:{loading:e.downloadLoading},on:{click:e.handleExport}},[i("svg-icon",{attrs:{"icon-class":"daochu"}}),e._v(e._s(e.$t("public.export")))],1),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["104-125-7"],expression:"['104-125-7']"},{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{width:"86px"},attrs:{icon:"el-icon-printer"},on:{click:e.handlePrint}},[e._v(e._s(e.$t("public.print")))]),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["104-125-1"],expression:"['104-125-1']"},{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{width:"86px"},attrs:{icon:"el-icon-plus",type:"success"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("public.add")))]),e._v(" "),i("el-dialog",{staticClass:"normal",attrs:{visible:e.categoryVisible,title:"补货周期设置",width:"600px",center:""},on:{"update:visible":function(t){e.categoryVisible=t}}},[i("el-form",{ref:"addCategoryForm",staticClass:"demo-ruleForm",staticStyle:{margin:"0 auto",width:"400px"},attrs:{rules:e.addCategoryFormRules,model:e.addCategoryForm}},[i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.Repository"),"label-width":"120px",prop:"repositoryId"}},[i("el-input",{on:{focus:e.handlechooseRep},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}}),e._v(" "),i("my-repository",{attrs:{repositorycontrol:e.repositorycontrol},on:{"update:repositorycontrol":function(t){e.repositorycontrol=t},repositoryname:e.repositoryname}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.replenishmentCycle"),"label-width":"120px",prop:"circle"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addCategoryForm.circle,callback:function(t){e.$set(e.addCategoryForm,"circle",t)},expression:"addCategoryForm.circle"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.normalTime"),"label-width":"120px",prop:"nomalDay"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addCategoryForm.nomalDay,callback:function(t){e.$set(e.addCategoryForm,"nomalDay",t)},expression:"addCategoryForm.nomalDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.emergencyTime"),"label-width":"120px",prop:"emergencyDay"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addCategoryForm.emergencyDay,callback:function(t){e.$set(e.addCategoryForm,"emergencyDay",t)},expression:"addCategoryForm.emergencyDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.iseffective"),"label-width":"120px",prop:"iseffective"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.addCategoryForm.iseffective,callback:function(t){e.$set(e.addCategoryForm,"iseffective",t)},expression:"addCategoryForm.iseffective"}},[i("el-option",{attrs:{label:e.$t("updates.qy"),value:"1"}}),e._v(" "),i("el-option",{attrs:{label:e.$t("updates.ty"),value:"2"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(t){e.handlesave()}}},[e._v(e._s(e.$t("Hmodule.baoc")))]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handlecancel()}}},[e._v(e._s(e.$t("Hmodule.cancel")))])],1)],1)],1),e._v(" "),i("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.id"),resizable:!1,align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.Repository"),resizable:!1,align:"center","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.repositoryName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.replenishmentCycle"),resizable:!1,align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.circle))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.normalTime"),resizable:!1,align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.nomalDay))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.emergencyTime"),resizable:!1,align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.emergencyDay))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("InventoryReplenishment.iseffective"),resizable:!1,align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("iseffectiveFilter")(t.row.isEffective)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("public.actions"),resizable:!1,align:"center","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["104-125-3"],expression:"['104-125-3']"}],attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleEdit(t.row)}}},[e._v(e._s(e.$t("public.edit")))])]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.getemplist.pagenum,limit:e.getemplist.pagesize},on:{"update:page":function(t){e.$set(e.getemplist,"pagenum",t)},"update:limit":function(t){e.$set(e.getemplist,"pagesize",t)},pagination:e.getlist}}),e._v(" "),i("el-dialog",{staticClass:"normal",attrs:{visible:e.editcategoryVisible,title:e.$t("updates.xgbhzq"),width:"600px",center:""},on:{"update:visible":function(t){e.editcategoryVisible=t}}},[i("el-form",{ref:"editCategoryForm",staticClass:"demo-ruleForm",staticStyle:{margin:"0 auto",width:"400px"},attrs:{rules:e.editCategoryFormRules,model:e.editCategoryForm}},[i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.Repository"),"label-width":"120px"}},[i("el-input",{attrs:{disabled:""},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.replenishmentCycle"),"label-width":"120px",prop:"circle"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:e.editCategoryForm.circle,callback:function(t){e.$set(e.editCategoryForm,"circle",t)},expression:"editCategoryForm.circle"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.normalTime"),"label-width":"120px",prop:"nomalDay"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:e.editCategoryForm.nomalDay,callback:function(t){e.$set(e.editCategoryForm,"nomalDay",t)},expression:"editCategoryForm.nomalDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.emergencyTime"),"label-width":"120px",prop:"emergencyDay"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.editCategoryForm.emergencyDay,callback:function(t){e.$set(e.editCategoryForm,"emergencyDay",t)},expression:"editCategoryForm.emergencyDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("InventoryReplenishment.iseffective"),"label-width":"120px",prop:"isEffective"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},on:{change:e.test},model:{value:e.editCategoryForm.isEffective,callback:function(t){e.$set(e.editCategoryForm,"isEffective",t)},expression:"editCategoryForm.isEffective"}},[i("el-option",{attrs:{label:e.$t("updates.qy"),value:"1"}}),e._v(" "),i("el-option",{attrs:{label:e.$t("updates.ty"),value:"2"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleOk()}}},[e._v(e._s(e.$t("public.edit")))]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleNo()}}},[e._v(e._s(e.$t("Hmodule.cancel")))])],1)],1)],1)],1)},[],!1,null,"110adbcd",null);g.options.__file="InventoryReplenishment.vue";t.default=g.exports},oPJa:function(e,t,i){"use strict";var a=i("9mSC");i.n(a).a}}]);